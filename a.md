# Spirom ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç’°å¢ƒå¤‰æ•°æƒ…å ±

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€Supabase MCPã¨Stripe MCPã§å–å¾—ã—ãŸå®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ“Š Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: `spirom`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID**: `wofkzcuijycdjwkymgtg`
- **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**: `ap-northeast-1` (æ±äº¬)
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: `ACTIVE_HEALTHY` âœ…
- **PostgreSQLãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 17.6.1.054
- **ä½œæˆæ—¥**: 2025-12-06

### æ¥ç¶šæƒ…å ±

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURL
```
https://wofkzcuijycdjwkymgtg.supabase.co
```

#### Anon Keyï¼ˆå…¬é–‹ã‚­ãƒ¼ï¼‰
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZmt6Y3VpanljZGp3a3ltZ3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5ODkzNDUsImV4cCI6MjA4MDU2NTM0NX0.cD73blAqo478ju7JJKUg5SH3rKXp3h6OIsiHhzQodlw
```

#### Publishable Keyï¼ˆæ–°å½¢å¼ï¼‰
```
sb_publishable_khYEkJ1L7HQboF5EenjPng_1NvZe3aN
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ›ã‚¹ãƒˆ
```
db.wofkzcuijycdjwkymgtg.supabase.co
```

---

## ğŸ’³ Stripeã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°
- **è¡¨ç¤ºå**: `New business ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹`
- **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID**: `acct_1RMCjiQTple2GeZD`
- **ãƒ¢ãƒ¼ãƒ‰**: ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ï¼‰

### ä½œæˆæ¸ˆã¿ãƒªã‚½ãƒ¼ã‚¹

#### å•†å“ï¼ˆStripeï¼‰
- **ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãƒ—ãƒ©ãƒ³**: `prod_TYSrfQiSqQWnqs`
- **ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³**: `prod_TYSr3ILommxe9T`

#### å•†å“ï¼ˆSupabaseï¼‰
Stripeã®å•†å“æƒ…å ±ã‚’åŸºã«ã€Supabaseã®productsãƒ†ãƒ¼ãƒ–ãƒ«ã«ä»¥ä¸‹ã®å•†å“ã‚’è¿½åŠ ã—ã¾ã—ãŸ:

1. **STANDARD PLAN** (ä¸€å›æ‰•ã„)
   - slug: `standard-onetime`
   - ä¾¡æ ¼: Â¥500
   - ã‚¿ã‚°: `NEW`
   - Stripeä¾¡æ ¼ID: `price_1SbLwHQTple2GeZDSAtSHRQe`

2. **PREMIUM PLAN** (ä¸€å›æ‰•ã„)
   - slug: `premium-onetime`
   - ä¾¡æ ¼: Â¥1,500
   - ã‚¿ã‚°: `SALE`
   - Stripeä¾¡æ ¼ID: `price_1SbLwIQTple2GeZDzqHlYMMI`

3. **STANDARD (MONTHLY)** (æœˆé¡)
   - slug: `standard-monthly`
   - ä¾¡æ ¼: Â¥5,000/æœˆ
   - Stripeä¾¡æ ¼ID: `price_1SbLwJQTple2GeZDl02mKRu6`

4. **PREMIUM (MONTHLY)** (æœˆé¡)
   - slug: `premium-monthly`
   - ä¾¡æ ¼: Â¥15,000/æœˆ
   - Stripeä¾¡æ ¼ID: `price_1SbLwKQTple2GeZD6KjSe4dl`

ã™ã¹ã¦ã®å•†å“ãŒ`is_featured=true`ã«è¨­å®šã•ã‚Œã¦ãŠã‚Šã€ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

#### ä¾¡æ ¼
- ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ä¸€å›æ‰•ã„: `price_1SbLwHQTple2GeZDSAtSHRQe` (Â¥500)
- ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¸€å›æ‰•ã„: `price_1SbLwIQTple2GeZDzqHlYMMI` (Â¥1,500)
- ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰æœˆé¡: `price_1SbLwJQTple2GeZDl02mKRu6` (Â¥5,000/æœˆ)
- ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æœˆé¡: `price_1SbLwKQTple2GeZD6KjSe4dl` (Â¥15,000/æœˆ)

---

## ğŸ”§ ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

### apps/api/.env

```env
# ã‚µãƒ¼ãƒãƒ¼è¨­å®š
SERVER_PORT=8000
SERVER_HOST=0.0.0.0

# Supabaseè¨­å®š
SUPABASE_URL=https://wofkzcuijycdjwkymgtg.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZmt6Y3VpanljZGp3a3ltZ3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5ODkzNDUsImV4cCI6MjA4MDU2NTM0NX0.cD73blAqo478ju7JJKUg5SH3rKXp3h6OIsiHhzQodlw

# Service Role Keyï¼ˆç®¡ç†è€…æ¨©é™ï¼‰
# âš ï¸ Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„
# https://supabase.com/dashboard/project/wofkzcuijycdjwkymgtg/settings/api
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# JWTè¨­å®š
JWT_SECRET=your-jwt-secret-key-change-this-in-production-32chars-minimum
JWT_EXPIRES_IN=86400

# Stripeè¨­å®š
# âš ï¸ Stripeãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„
# https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_xxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
RUST_LOG=info,spirom_api=debug
```

### apps/web/.env.local

```env
# API URL
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_BFF_URL=http://localhost:8787

# Supabaseè¨­å®š
NEXT_PUBLIC_SUPABASE_URL=https://wofkzcuijycdjwkymgtg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZmt6Y3VpanljZGp3a3ltZ3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5ODkzNDUsImV4cCI6MjA4MDU2NTM0NX0.cD73blAqo478ju7JJKUg5SH3rKXp3h6OIsiHhzQodlw

# Stripeå…¬é–‹ã‚­ãƒ¼
# âš ï¸ Stripeãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„
# https://dashboard.stripe.com/test/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx

# Stripeä¾¡æ ¼IDï¼ˆä½œæˆæ¸ˆã¿ï¼‰
NEXT_PUBLIC_STRIPE_PRICE_STANDARD_ONETIME=price_1SbLwHQTple2GeZDSAtSHRQe
NEXT_PUBLIC_STRIPE_PRICE_PREMIUM_ONETIME=price_1SbLwIQTple2GeZDzqHlYMMI
NEXT_PUBLIC_STRIPE_PRICE_STANDARD_MONTHLY=price_1SbLwJQTple2GeZDl02mKRu6
NEXT_PUBLIC_STRIPE_PRICE_PREMIUM_MONTHLY=price_1SbLwKQTple2GeZD6KjSe4dl

# Stripeå•†å“IDï¼ˆä½œæˆæ¸ˆã¿ï¼‰
NEXT_PUBLIC_STRIPE_PRODUCT_STANDARD=prod_TYSrfQiSqQWnqs
NEXT_PUBLIC_STRIPE_PRODUCT_PREMIUM=prod_TYSr3ILommxe9T

# Sanityè¨­å®š
# âš ï¸ Sanityãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„
NEXT_PUBLIC_SANITY_PROJECT_ID=your-project-id
NEXT_PUBLIC_SANITY_DATASET=production
NEXT_PUBLIC_SANITY_API_VERSION=2024-01-01
```

---

## ğŸ”‘ å–å¾—ãŒå¿…è¦ãªã‚­ãƒ¼

ä»¥ä¸‹ã®ã‚­ãƒ¼ã¯æ‰‹å‹•ã§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

### 1. Supabase Service Role Key

1. https://supabase.com/dashboard/project/wofkzcuijycdjwkymgtg/settings/api ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒService Roleã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã€Œsecretã€ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼
3. `apps/api/.env` ã® `SUPABASE_SERVICE_ROLE_KEY` ã«è¨­å®š

### 2. Stripe Secret Key

1. https://dashboard.stripe.com/test/apikeys ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒSecret keyã€ã®ã€ŒReveal test keyã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. `sk_test_` ã§å§‹ã¾ã‚‹ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼
4. `apps/api/.env` ã® `STRIPE_SECRET_KEY` ã«è¨­å®š

### 3. Stripe Publishable Key

1. åŒã˜ãƒšãƒ¼ã‚¸ã®ã€ŒPublishable keyã€ã‚’ã‚³ãƒ”ãƒ¼
2. `pk_test_` ã§å§‹ã¾ã‚‹ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼
3. `apps/web/.env.local` ã® `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY` ã«è¨­å®š

### 4. Stripe Webhook Secret

1. https://dashboard.stripe.com/test/webhooks ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Webhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆï¼ˆé–‹ç™ºæ™‚ã¯ `stripe listen` ã‚’ä½¿ç”¨ï¼‰
3. `whsec_` ã§å§‹ã¾ã‚‹ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼
4. `apps/api/.env` ã® `STRIPE_WEBHOOK_SECRET` ã«è¨­å®š

---

## ğŸ“ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

```bash
# 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd apps/web
npm install

# 2. ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆã™ã§ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
# .env.local ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®å†…å®¹ã‚’è¨­å®šã—ã¦ãã ã•ã„

# 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev
```

### å¿…è¦ãªç’°å¢ƒå¤‰æ•°

apps/web/.env.local ã«ä»¥ä¸‹ã‚’è¨­å®šã—ã¦ãã ã•ã„:

```env
# Supabaseè¨­å®š
NEXT_PUBLIC_SUPABASE_URL=https://wofkzcuijycdjwkymgtg.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZmt6Y3VpanljZGp3a3ltZ3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5ODkzNDUsImV4cCI6MjA4MDU2NTM0NX0.cD73blAqo478ju7JJKUg5SH3rKXp3h6OIsiHhzQodlw

# Stripeå…¬é–‹ã‚­ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx
```

---

## ğŸ”— ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒªãƒ³ã‚¯

- **Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: https://supabase.com/dashboard/project/wofkzcuijycdjwkymgtg
- **Stripe Dashboard**: https://dashboard.stripe.com/test/dashboard
- **Stripe APIã‚­ãƒ¼**: https://dashboard.stripe.com/test/apikeys
- **Stripe Webhook**: https://dashboard.stripe.com/test/webhooks

