# apps/api/env.example
# ローカル開発用（値は各自の環境に合わせて設定）
#
# 使い方:
# - `apps/api/.env` を作成し、この内容をコピーして値を埋めてください。

# サーバー設定
PORT=3001
HOST=0.0.0.0

# Supabase設定
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
# 任意（last_login 更新などで利用。未設定でも起動は可能）
SUPABASE_SERVICE_ROLE_KEY=

# JWT設定
# 必須: 32文字以上のランダム値（例: `openssl rand -hex 32`）
# ※「change-me」等の推測可能な値は起動時に拒否されます
JWT_SECRET=
JWT_ACCESS_EXPIRY=3600
JWT_REFRESH_EXPIRY=2592000

# CORS設定（必要に応じて）
CORS_ORIGINS=http://localhost:3000

# デバッグ（原因特定用: エラー詳細をレスポンスに含める）
# 本番では必ず 0（未設定）にしてください
API_DEBUG_ERRORS=0
ENVIRONMENT=local

# ログ
RUST_LOG=info,spirom_api=debug,tower_http=info

# ============================================
# Security Configuration
# ============================================

# セッション署名用シークレット（必須）
# 生成: openssl rand -hex 32
SESSION_SECRET=

# BFFプロキシトークン（本番では必須）
# Next.js経由のリクエストのみ許可するためのトークン
# Next.js側と同じ値を設定
# 生成: openssl rand -hex 32
BFF_PROXY_TOKEN=

# 信頼できるプロキシIP（カンマ区切り）
# X-Forwarded-Forヘッダーを信用するプロキシのIP
# Fly.io: fdaa::
# Cloudflare: https://www.cloudflare.com/ips/
# ローカル: 127.0.0.1,::1
TRUSTED_PROXY_IPS=127.0.0.1,::1
